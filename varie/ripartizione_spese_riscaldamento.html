<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ripartizione Spese Riscaldamento</title>
    <script>
        function calculate() {
            const totalBill = parseFloat(document.getElementById('totalBill').value) || 0;
            const m3ACS = parseFloat(document.getElementById('m3ACS').value) || 0;
            const gasPerM3 = parseFloat(document.getElementById('gasPerM3').value) || 3.6;
            const boilerEfficiency = parseFloat(document.getElementById('boilerEfficiency').value) || 96;
            const gasCost = parseFloat(document.getElementById('gasCost').value) || 1.00;
            const heatingPercent1 = parseFloat(document.getElementById('heatingPercent1').value) || 50;
            const heatingPercent2 = parseFloat(document.getElementById('heatingPercent2').value) || 50;
            const acsPercent1 = parseFloat(document.getElementById('acsPercent1').value) || 50;
            const acsPercent2 = parseFloat(document.getElementById('acsPercent2').value) || 50;

            const costPerM3ACS = (gasPerM3 * (100 / boilerEfficiency)) * gasCost;
            const totalACSCost = m3ACS * costPerM3ACS;
            const heatingCost = totalBill - totalACSCost;

            const heatingCost1 = (heatingCost * (heatingPercent1 / 100));
            const heatingCost2 = (heatingCost * (heatingPercent2 / 100));
            const acsCost1 = (totalACSCost * (acsPercent1 / 100));
            const acsCost2 = (totalACSCost * (acsPercent2 / 100));

            document.getElementById('costPerM3ACS').innerText = `Cost per m³ ACS: €${costPerM3ACS.toFixed(2)}`;
            document.getElementById('totalACSCost').innerText = `Total ACS Cost: €${totalACSCost.toFixed(2)}`;
            document.getElementById('heatingCost').innerText = `Heating Cost: €${heatingCost.toFixed(2)}`;

            document.getElementById('heatingCost1').innerText = `Heating Cost for Apartment 1: €${heatingCost1.toFixed(2)}`;
            document.getElementById('heatingCost2').innerText = `Heating Cost for Apartment 2: €${heatingCost2.toFixed(2)}`;
            document.getElementById('acsCost1').innerText = `ACS Cost for Apartment 1: €${acsCost1.toFixed(2)}`;
            document.getElementById('acsCost2').innerText = `ACS Cost for Apartment 2: €${acsCost2.toFixed(2)}`;

            const totalToPay1 = heatingCost1 + acsCost1;
            const totalToPay2 = heatingCost2 + acsCost2;
            document.getElementById('totalToPay1').innerText = `Total to Pay for Apartment 1: €${totalToPay1.toFixed(2)}`;
            document.getElementById('totalToPay2').innerText = `Total to Pay for Apartment 2: €${totalToPay2.toFixed(2)}`;

            document.getElementById('verification').innerText = `Verification: Total Apartment 1 + Total Apartment 2 = €${(totalToPay1 + totalToPay2).toFixed(2)} (should equal total bill €${totalBill.toFixed(2)})`;
        }
    </script>
</head>
<body>
    <h1>Ripartizione Spese Riscaldamento</h1>
    <label>Total Bill: <input type="number" id="totalBill" oninput="calculate()"></label><br>
    <label>m³ of ACS Consumed: <input type="number" id="m3ACS" oninput="calculate()"></label><br>
    <label>Gas per m³ ACS: <input type="number" id="gasPerM3" value="3.6" oninput="calculate()"></label><br>
    <label>Boiler Efficiency (%): <input type="number" id="boilerEfficiency" value="96" oninput="calculate()"></label><br>
    <label>Gas Cost: <input type="number" id="gasCost" value="1.00" oninput="calculate()"></label><br>
    <label>Heating % for Apartment 1: <input type="number" id="heatingPercent1" value="50" oninput="calculate()"></label><br>
    <label>Heating % for Apartment 2: <input type="number" id="heatingPercent2" value="50" oninput="calculate()"></label><br>
    <label>ACS % for Apartment 1: <input type="number" id="acsPercent1" value="50" oninput="calculate()"></label><br>
    <label>ACS % for Apartment 2: <input type="number" id="acsPercent2" value="50" oninput="calculate()"></label><br>
    <h2>Results</h2>
    <div id="costPerM3ACS"></div>
    <div id="totalACSCost"></div>
    <div id="heatingCost"></div>
    <h2>Summary</h2>
    <div id="heatingCost1"></div>
    <div id="heatingCost2"></div>
    <div id="acsCost1"></div>
    <div id="acsCost2"></div>
    <div id="totalToPay1"></div>
    <div id="totalToPay2"></div>
    <div id="verification"></div>
</body>
</html>